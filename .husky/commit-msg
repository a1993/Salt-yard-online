#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# 读取提交信息
commit_msg=$(cat "$1")

# 检查提交信息格式
if ! echo "$commit_msg" | grep -qE "^(feat|fix|docs|style|refactor|perf|test|chore)(\(.+\))?: .{1,}"; then
  echo "❌ 提交信息格式错误！"
  echo ""
  echo "请使用约定式提交格式:"
  echo "  type(scope): subject"
  echo ""
  echo "允许的 type:"
  echo "  feat:     新功能"
  echo "  fix:      Bug 修复"
  echo "  docs:     文档更新"
  echo "  style:    代码格式"
  echo "  refactor: 代码重构"
  echo "  perf:     性能优化"
  echo "  test:     测试"
  echo "  chore:    构建/工具"
  echo ""
  echo "示例:"
  echo "  feat(product): add size guide modal"
  echo "  fix(cart): resolve quantity update issue"
  echo ""
  exit 1
fi

echo "✅ 提交信息格式正确"

